<h1><%= @base_rom.device.name %> &gt; <%= @base_rom.name %> &gt; Configurations</h1>

<p id="notice"><%= notice %></p>

<div id="nav">
  <%= link_to 'Back', @base_rom.device %>
</div>

<p><%= @base_rom.info.split("\n").join("<br/>").html_safe %></p>

<table>
  <tr>
    <th>Name</th>
    <th>Status</th>
    <th>Packages</th>
    <th></th>
  </tr>

<% @configurations.each do |configuration| %>
  <tr>
    <td><strong><%= configuration.name %></strong></td>
    <td><%= configuration.file_path.nil? ? '<em>Pending...</em>'.html_safe : 'Ready' %></td>
    <td><%= configuration.packages.empty? ? '<em>None</em>'.html_safe : configuration.packages.collect {|p| p.fullname}.join('<br/>').html_safe %></td>
    <td>
      <% unless configuration.file_path.nil? %>
        <%= link_to('Download', '/'+configuration.file_path) %><br/>
        <%= image_tag "http://joelcogen.com/qr/img.php?u=http://#{request.host}/#{configuration.file_path}", :size=>'100x100', :alt=>'qr-code' %>
      <% end %>
    </td>
  </tr>
<% end %>
</table>

<br/>
<h2><%= link_to 'Make my own!', new_device_base_rom_configuration_path(@base_rom.device, @base_rom) %></h2>

<div id="admin">
  <%= link_to 'Edit this ROM', [@base_rom.device, @base_rom] %>
</div>

